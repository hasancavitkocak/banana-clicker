import{r,a as W}from"./vendor-wpXbf5jk.js";import{u as C,l as V}from"./game-CiKeyGZW.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();var _={exports:{}},M={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=r,Z=Symbol.for("react.element"),X=Symbol.for("react.fragment"),K=Object.prototype.hasOwnProperty,J=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q={key:!0,ref:!0,__self:!0,__source:!0};function I(t,s,o){var l,n={},a=null,m=null;o!==void 0&&(a=""+o),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(m=s.ref);for(l in s)K.call(s,l)&&!Q.hasOwnProperty(l)&&(n[l]=s[l]);if(t&&t.defaultProps)for(l in s=t.defaultProps,s)n[l]===void 0&&(n[l]=s[l]);return{$$typeof:Z,type:t,key:a,ref:m,props:n,_owner:J.current}}M.Fragment=X;M.jsx=I;M.jsxs=I;_.exports=M;var e=_.exports,L,D=W;L=D.createRoot,D.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),p=(t,s)=>{const o=r.forwardRef(({color:l="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:m,className:u="",children:i,...x},h)=>r.createElement("svg",{ref:h,...ee,width:n,height:n,stroke:l,strokeWidth:m?Number(a)*24/Number(n):a,className:["lucide",`lucide-${te(t)}`,u].join(" "),...x},[...s.map(([b,N])=>r.createElement(b,N)),...Array.isArray(i)?i:[i]]));return o.displayName=`${t}`,o};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=p("Banana",[["path",{d:"M4 13c3.5-2 8-2 10 2a5.5 5.5 0 0 1 8 5",key:"1cscit"}],["path",{d:"M5.15 17.89c5.52-1.52 8.65-6.89 7-12C11.55 4 11.5 2 13 2c3.22 0 5 5.5 5 8 0 6.5-4.2 12-10.49 12C5.11 22 2 22 2 20c0-1.5 1.14-1.55 3.15-2.11Z",key:"1y1nbv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=p("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=p("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=p("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=p("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=p("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=p("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=p("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=p("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=p("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=p("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=p("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=p("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=p("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function ue({onClick:t,isPlaying:s,isWinning:o,showWinEffect:l}){const n=()=>{s&&t()};return e.jsxs("button",{onClick:n,disabled:!s,className:`transform transition-all duration-150 ${s?"hover:scale-105 active:scale-90":"opacity-50"} focus:outline-none relative`,children:[e.jsx(se,{size:120,className:`text-yellow-400 drop-shadow-lg transition-all duration-150 ${s?"animate-pulse":""} ${o?"text-yellow-500":""} ${l?"animate-bounce text-yellow-500":""}`}),l&&o&&e.jsxs("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-4xl font-black text-yellow-500 animate-bounce tracking-wider drop-shadow-lg",style:{textShadow:"2px 2px 0 #000, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000"},children:"WIN!"}),e.jsx("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg",children:"Winner!"})]})]})}function pe({timeLeft:t,isPlaying:s}){return e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-yellow-100 px-4 py-2 rounded-full shadow-md mb-[25px]",children:[e.jsx(ce,{size:24,className:"text-yellow-600"}),e.jsxs("span",{className:"font-bold text-yellow-800 text-xl",children:[t,"s"]})]})}function xe({score:t,combo:s,maxCombo:o}){return e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:24,className:"text-yellow-600"}),e.jsx("span",{className:"text-3xl font-bold text-yellow-800",children:t})]}),e.jsxs("div",{className:"flex gap-2",children:[s>1&&e.jsx("div",{className:"animate-bounce",children:e.jsxs("span",{className:"px-3 py-1 bg-yellow-500 text-white rounded-full text-sm font-bold",children:[s,"x Combo!"]})}),e.jsxs("span",{className:"text-sm text-yellow-600",children:["Max Combo: ",o,"x"]})]})]})}function fe({onMatch:t,onCancel:s,isMatchmaking:o,disabled:l}){return o?e.jsxs("button",{onClick:s,className:`px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-full
          flex items-center justify-center gap-2 transform transition-all
          hover:scale-105 active:scale-95 focus:outline-none shadow-lg
          animate-pulse`,children:[e.jsx(U,{size:16}),e.jsx("span",{children:"Cancel Search"})]}):e.jsxs("button",{onClick:t,disabled:l,className:`px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-full
        flex items-center justify-center gap-2 transform transition-all
        hover:scale-105 active:scale-95 focus:outline-none shadow-lg
        disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(de,{size:16}),e.jsx("span",{children:"Find Match"})]})}function he({onSurrender:t,onMatch:s,onCancelMatch:o,isPlaying:l,isMatchmaking:n}){return e.jsxs("div",{className:"mt-6 flex flex-col items-center gap-4",children:[!l&&e.jsx(fe,{onMatch:s,onCancel:o,isMatchmaking:n,disabled:l}),l&&n&&e.jsxs("button",{onClick:t,className:`px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-full
            flex items-center justify-center gap-2 transform transition-all
            hover:scale-105 active:scale-95 focus:outline-none shadow-lg`,children:[e.jsx(P,{size:16}),e.jsx("span",{children:"Surrender"})]})]})}function ye({onSelectTime:t,selectedTime:s,disabled:o}){const l=[5,10,15,20];return e.jsxs("div",{className:"flex flex-col items-center gap-2 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:20,className:"text-yellow-600"}),e.jsx("span",{className:"font-semibold text-yellow-800",children:"Select Time"})]}),e.jsx("div",{className:"flex gap-2",children:l.map(n=>e.jsxs("button",{onClick:()=>t(n),disabled:o,className:`px-4 py-2 rounded-full text-sm font-medium transition-all
              ${s===n?"bg-yellow-500 text-white":"bg-yellow-100 text-yellow-800 hover:bg-yellow-200"} ${o?"opacity-50 cursor-not-allowed":""}`,children:[n,"s"]},n))}),e.jsx("p",{className:"text-sm text-yellow-600 mt-1 text-center",children:"You'll be matched with players who selected the same duration"})]})}function ge({highScore:t}){const[s,o]=r.useState(!1);return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-yellow-100 shadow-lg transition-all duration-300",style:{transform:`translateY(${s?"0":"calc(100% - 3rem)"})`},children:[e.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-between px-6 py-2 hover:bg-yellow-200 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{size:20,className:"text-yellow-600"}),e.jsx("span",{className:"font-semibold text-yellow-800",children:"High Score"})]}),s?e.jsx(ne,{size:20,className:"text-yellow-600"}):e.jsx(oe,{size:20,className:"text-yellow-600"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl font-bold text-yellow-800",children:t}),e.jsx("p",{className:"text-yellow-600 mt-2",children:"Your best score yet!"})]})})]})}function be({score:t,clicks:s,maxCombo:o}){return t===void 0||s===void 0?null:e.jsxs("div",{className:"flex items-center gap-4 bg-purple-100 px-4 py-2 rounded-lg shadow-md w-full max-w-md mx-auto mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:20,className:"text-purple-600"}),e.jsx("span",{className:"font-bold text-purple-800",children:"Opponent"})]}),e.jsxs("div",{className:"flex gap-4 ml-auto",children:[e.jsxs("div",{className:"text-purple-800",children:["Score: ",t]}),e.jsxs("div",{className:"text-purple-800",children:["Clicks: ",s]}),e.jsxs("div",{className:"text-purple-800",children:["Max: ",o,"x"]})]})]})}const k={click:"/sounds/click.mp3",combo:"/sounds/combo.mp3",win:"/sounds/win.mp3",lose:"/sounds/click.mp3",countdown:"/sounds/countdown.mp3",start:"/sounds/start.mp3"};function z(){const[t]=C(k.click,{volume:.2,preload:!0,interrupt:!0}),[s]=C(k.combo,{volume:.4,preload:!0,interrupt:!0}),[o]=C(k.win,{volume:.5,preload:!0,interrupt:!0}),[l]=C(k.lose,{volume:.5,preload:!0,interrupt:!0}),[n]=C(k.countdown,{volume:.5,preload:!0,interrupt:!0}),[a]=C(k.start,{volume:.6,preload:!0,interrupt:!0});return{playClick:t,playCombo:s,playWin:o,playLose:l,playCountdown:n,playStart:a}}function Ce({result:t,onRematch:s,onClose:o,surrendered:l,opponentDisconnected:n}){const a=t.playerScore>t.opponentScore,m=t.playerScore===t.opponentScore,{playWin:u,playLose:i}=z();return r.useEffect(()=>{a&&!l&&!n?u():m||i()},[a,m,l,n,u,i]),r.useEffect(()=>{if(n){const x=setTimeout(()=>{o()},3e3);return()=>clearTimeout(x)}},[n,o]),e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 md:p-8 w-full max-w-md mx-auto shadow-xl relative overflow-hidden",children:[a&&!l&&!n&&e.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-yellow-500 rotate-45 transform origin-bottom-left"}),e.jsx("div",{className:"text-center mb-6",children:n?e.jsxs("div",{className:"flex flex-col items-center gap-2 animate-bounce",children:[e.jsx(ie,{size:48,className:"text-red-500"}),e.jsx("span",{className:"text-red-500",children:"Opponent Left"}),e.jsx("span",{className:"text-sm text-gray-500",children:"The match has ended"}),e.jsx("span",{className:"text-xs text-gray-400 mt-2",children:"Closing in 3 seconds..."})]}):l?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(P,{size:48,className:"text-red-500"}),e.jsx("span",{className:"text-red-500",children:"Surrendered!"}),e.jsx("span",{className:"text-sm text-gray-500",children:"You gave up the match"})]}):a?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ae,{size:48,className:"text-yellow-500 animate-bounce"}),e.jsx("span",{className:"text-yellow-500 text-4xl font-black",style:{textShadow:"1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"},children:"WIN!"})]}):m?e.jsx("span",{className:"text-4xl font-black",children:"It's a Draw!"}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-4xl font-black text-red-500 animate-pulse",children:"Defeat"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Better luck next time!"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[e.jsxs("div",{className:`text-center p-4 rounded-lg transition-colors ${a&&!l&&!n?"bg-yellow-100 ring-2 ring-yellow-400":m?"":"bg-red-50 text-red-800"}`,children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"You"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"flex items-center gap-1 justify-center",children:[e.jsx(S,{size:16,className:a&&!l&&!n?"text-yellow-600":"text-gray-400"}),e.jsx("span",{children:t.playerScore})]}),e.jsxs("p",{children:[t.playerClicks," clicks"]}),e.jsxs("p",{children:["Max: ",t.playerMaxCombo,"x"]})]})]}),e.jsxs("div",{className:`text-center p-4 rounded-lg transition-colors ${!a||l?"bg-purple-100 ring-2 ring-purple-400":a?"bg-red-50 text-red-800":""}`,children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Opponent"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"flex items-center gap-1 justify-center",children:[e.jsx(S,{size:16,className:!a||l?"text-purple-600":"text-gray-400"}),e.jsx("span",{children:t.opponentScore})]}),e.jsxs("p",{children:[t.opponentClicks," clicks"]}),e.jsxs("p",{children:["Max: ",t.opponentMaxCombo,"x"]})]})]})]}),a&&!l&&!n&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-600 bg-yellow-100 p-3 rounded-lg",children:[e.jsx(A,{size:24}),e.jsx("span",{className:"font-bold text-lg",children:"Champion!"})]}),!n&&e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsxs("button",{onClick:s,className:`px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full
                  flex items-center justify-center gap-2 transform transition-all
                  hover:scale-105 active:scale-95 focus:outline-none shadow-lg`,children:[e.jsx(re,{size:16}),e.jsx("span",{children:"Rematch"})]}),e.jsxs("button",{onClick:o,className:`px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-full
                  flex items-center justify-center gap-2 transform transition-all
                  hover:scale-105 active:scale-95 focus:outline-none shadow-lg`,children:[e.jsx(U,{size:16}),e.jsx("span",{children:"Close"})]})]})]})]})})}function ke({count:t}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx("div",{className:"text-8xl font-black text-white animate-bounce",style:{textShadow:"4px 4px 0 #000, -4px -4px 0 #000, 4px -4px 0 #000, -4px 4px 0 #000"},children:t||"GO!"})})}const y={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",FIND_MATCH:"findMatch",MATCH_FOUND:"matchFound",MATCH_CANCELLED:"matchCancelled",UPDATE_SCORE:"updateScore",OPPONENT_UPDATE:"opponentUpdate",SURRENDER:"surrender",OPPONENT_SURRENDERED:"opponentSurrendered",OPPONENT_DISCONNECTED:"opponentDisconnected",GAME_ENDED:"gameEnded",WAITING:"waiting",SET_USERNAME:"setUsername"},we={reconnectionAttempts:5,reconnectionDelay:1e3,timeout:2e4,transports:["websocket","polling"],path:"/socket.io/",forceNew:!0,autoConnect:!1,reconnection:!0,upgrade:!0,rememberUpgrade:!0,secure:!0};function Ne(){return window.location.origin}function je(){const[t,s]=r.useState(!1),[o,l]=r.useState(null),n=r.useRef(null),a=r.useRef(0),m=5,u=r.useCallback(()=>{if(!n.current&&a.current<m){const x=Ne();n.current=V(x,{...we,transports:a.current===0?["websocket"]:["websocket","polling"]}),n.current.on(y.CONNECT,()=>{s(!0),l(null),a.current=0,console.log("Connected to server")}),n.current.on(y.CONNECT_ERROR,h=>{console.error("Connection error:",h),l(h),s(!1),a.current+=1,a.current<m&&setTimeout(()=>{n.current&&(n.current.disconnect(),n.current=null),u()},1e3*Math.min(a.current,5))}),n.current.on(y.DISCONNECT,()=>{s(!1),console.log("Disconnected from server")})}},[]);r.useEffect(()=>(u(),()=>{n.current&&(n.current.disconnect(),n.current=null,s(!1),l(null),a.current=0)}),[u]);const i=r.useCallback(()=>{n.current&&(n.current.disconnect(),n.current=null),a.current=0,u()},[u]);return{socket:n.current,isConnected:t,error:o,reconnect:i}}function ve(){const{socket:t,isConnected:s}=je(),o=r.useCallback(i=>{if(!s||!t){console.error("Socket not connected");return}t.emit(y.SET_USERNAME,{username:i})},[t,s]),l=r.useCallback(i=>{if(!s||!t){console.error("Socket not connected");return}t.emit(y.FIND_MATCH,{duration:i})},[t,s]),n=r.useCallback(()=>{!s||!t||t.emit(y.MATCH_CANCELLED)},[t,s]),a=r.useCallback((i,x,h,b)=>{!s||!t||t.emit(y.UPDATE_SCORE,{gameId:i,score:x,clicks:h,maxCombo:b})},[t,s]),m=r.useCallback(i=>{!s||!t||t.emit(y.SURRENDER,{gameId:i})},[t,s]),u=r.useCallback(i=>{!s||!t||t.emit(y.GAME_ENDED,{gameId:i})},[t,s]);return{socket:t,isConnected:s,setUsername:o,findMatch:l,cancelMatch:n,updateScore:a,surrender:m,endGame:u}}const Se=10,Me=.1,Ee=500,Oe=3,Re=10,Te=2e3,De=1e3;function _e(){const[t,s]=r.useState({score:0,clicks:0,timeLeft:5,isPlaying:!1,combo:1,maxCombo:1,lastClickTime:0,highScore:parseInt(localStorage.getItem("highScore")||"0",10),gameDuration:5,isMatchmaking:!1,showResults:!1,surrendered:!1,opponentDisconnected:!1}),[o,l]=r.useState(!1),{playClick:n,playCombo:a,playCountdown:m,playStart:u}=z(),{socket:i,findMatch:x,updateScore:h,surrender:b,cancelMatch:N}=ve(),O=r.useCallback(c=>{c>t.highScore&&(localStorage.setItem("highScore",c.toString()),s(d=>({...d,highScore:c})))},[t.highScore]),R=r.useCallback(()=>{if(!t.isPlaying||!o)return;const c=setInterval(()=>{s(d=>{const f=Math.floor(Math.random()*30)+10,w=(d.opponentScore||0)+f,E=(d.opponentClicks||0)+1,g=Math.max(d.opponentMaxCombo||1,Math.floor(Math.random()*3)+1);return{...d,opponentScore:w,opponentClicks:E,opponentMaxCombo:g}})},De);return()=>clearInterval(c)},[t.isPlaying,o]),$=r.useCallback(()=>{if(!t.isPlaying)return;n();const c=Date.now(),d=c-t.lastClickTime;let f=t.combo;d<Ee?(f=t.combo+1,f%Re===0&&a()):f=1;const w=1+(f-1)*Me,E=Math.round(Se*w);s(g=>{const v={...g,score:g.score+E,clicks:g.clicks+1,combo:f,maxCombo:Math.max(g.maxCombo,f),lastClickTime:c};return g.gameId&&!o&&h(g.gameId,v.score,v.clicks,v.maxCombo),v})},[t.isPlaying,t.lastClickTime,t.combo,t.maxCombo,t.gameId,o,n,a,h]),j=r.useCallback(()=>{u(),s(c=>({...c,score:0,clicks:0,timeLeft:c.gameDuration,isPlaying:!0,combo:1,maxCombo:1,lastClickTime:Date.now(),countdown:Oe,opponentScore:0,opponentClicks:0,opponentMaxCombo:1}))},[u]),T=r.useCallback(()=>{s(c=>(O(c.score),{...c,isPlaying:!1,showResults:!0}))},[O]),H=r.useCallback(()=>{t.gameId&&(o||b(t.gameId),s(c=>({...c,isPlaying:!1,showResults:!0,surrendered:!0})))},[t.gameId,o,b]),B=r.useCallback(()=>{o?(s(c=>({...c,isMatchmaking:!0,showResults:!1,surrendered:!1,opponentScore:void 0,opponentClicks:void 0,opponentMaxCombo:void 0,opponentDisconnected:!1})),setTimeout(()=>{s(c=>({...c,gameId:"simulation-"+Date.now()})),j()},Te)):(x(t.gameDuration),s(c=>({...c,isMatchmaking:!0,showResults:!1,surrendered:!1,opponentScore:void 0,opponentClicks:void 0,opponentMaxCombo:void 0,opponentDisconnected:!1})))},[o,x,t.gameDuration,j]),G=r.useCallback(()=>{o?s(c=>({...c,isMatchmaking:!1,showResults:!1,opponentScore:void 0,opponentClicks:void 0,opponentMaxCombo:void 0})):(N(),s(c=>({...c,isMatchmaking:!1,showResults:!1,opponentScore:void 0,opponentClicks:void 0,opponentMaxCombo:void 0})))},[o,N]),F=r.useCallback(c=>{s(d=>({...d,gameDuration:c,timeLeft:c}))},[]),q=r.useCallback(()=>{s(c=>({...c,isMatchmaking:!1,showResults:!1,opponentScore:void 0,opponentClicks:void 0,opponentMaxCombo:void 0,surrendered:!1,opponentDisconnected:!1,gameId:void 0}))},[]);return r.useEffect(()=>{if(t.isPlaying){const c=setInterval(()=>{s(d=>d.countdown!==void 0&&d.countdown>0?(m(),{...d,countdown:d.countdown-1}):d.countdown===0?{...d,countdown:void 0}:d.timeLeft<=1?(clearInterval(c),{...d,timeLeft:0,isPlaying:!1,showResults:!0}):{...d,timeLeft:d.timeLeft-1})},1e3);return()=>clearInterval(c)}},[t.isPlaying,m]),r.useEffect(()=>{if(o&&t.isPlaying)return R()},[o,t.isPlaying,R]),r.useEffect(()=>{if(i&&!o)return i.on("matchFound",({gameId:c})=>{s(d=>({...d,gameId:c})),j()}),i.on("opponentUpdate",({score:c,clicks:d,maxCombo:f})=>{s(w=>({...w,opponentScore:c,opponentClicks:d,opponentMaxCombo:f}))}),i.on("opponentSurrendered",()=>{T()}),i.on("opponentDisconnected",()=>{s(c=>({...c,isPlaying:!1,showResults:!0,opponentDisconnected:!0}))}),()=>{i.off("matchFound"),i.off("opponentUpdate"),i.off("opponentSurrendered"),i.off("opponentDisconnected")}},[i,o,j,T]),{gameState:t,surrender:H,startMatchmaking:B,cancelMatchmaking:G,handleClick:$,setGameDuration:F,closeMatch:q,simulationMode:o,setSimulationMode:l}}function Ie({children:t}){return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-yellow-50 to-yellow-100 flex flex-col items-center pt-4 px-4 md:pt-8",children:t})}function Le(){return e.jsx("div",{className:"text-center mb-8",children:e.jsx("h1",{className:"text-4xl font-bold text-yellow-800",children:"Banana Clicker"})})}function Pe(){const{gameState:t,surrender:s,startMatchmaking:o,cancelMatchmaking:l,handleClick:n,setGameDuration:a,closeMatch:m,simulationMode:u,setSimulationMode:i}=_e(),x=!t.showResults||t.isPlaying;return e.jsxs(Ie,{children:[e.jsx("div",{className:"fixed top-4 right-4",children:e.jsxs("button",{onClick:()=>i(!u),className:`px-4 py-2 rounded-full flex items-center gap-2 transition-colors
            ${u?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,children:[e.jsx(me,{size:16}),e.jsxs("span",{children:["Simulation ",u?"ON":"OFF"]})]})}),e.jsxs("div",{className:"flex flex-col items-center w-full max-w-md mx-auto",children:[e.jsx(Le,{}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx(be,{score:t.opponentScore,clicks:t.opponentClicks,maxCombo:t.opponentMaxCombo}),e.jsx("div",{className:"flex justify-center",children:e.jsx(pe,{timeLeft:t.timeLeft,isPlaying:t.isPlaying})})]}),e.jsx(xe,{score:t.score,combo:t.combo,maxCombo:t.maxCombo}),x&&e.jsx(ue,{onClick:n,isPlaying:t.isPlaying,isWinning:t.score>(t.opponentScore||0),showWinEffect:!t.isPlaying&&t.showResults}),e.jsxs("div",{className:"text-lg text-yellow-700 text-center mt-4",children:[t.clicks," ",t.clicks===1?"Click":"Clicks"]}),e.jsx(ye,{onSelectTime:a,selectedTime:t.gameDuration,disabled:t.isPlaying}),e.jsx(he,{onSurrender:s,onMatch:o,onCancelMatch:l,isPlaying:t.isPlaying,isMatchmaking:t.isMatchmaking})]}),e.jsx(ge,{highScore:t.highScore}),t.showResults&&!t.isPlaying&&e.jsx(Ce,{result:{playerScore:t.score,playerClicks:t.clicks,playerMaxCombo:t.maxCombo,opponentScore:t.opponentScore||0,opponentClicks:t.opponentClicks||0,opponentMaxCombo:t.opponentMaxCombo||1},onRematch:o,onClose:m,surrendered:t.surrendered,opponentDisconnected:t.opponentDisconnected}),t.countdown!==void 0&&e.jsx(ke,{count:t.countdown})]})}L(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(Pe,{})}));
//# sourceMappingURL=main-DEiRS9Q4.js.map
